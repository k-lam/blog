[「视频直播技术详解」系列之一：采集](https://zhuanlan.zhihu.com/p/22502905)

[论码流、码率、采样率、比特率、帧速率、分辨率、高清视频的概念](http://www.easydarwin.org/article/Streaming/92.html)

# 视频流程

生成一个视频，通常通过以下流程：

1. [采集](https://zhuanlan.zhihu.com/p/22502905) : 就是一张一张图片，关键参数：原始分辨率， 采样频率

2. [处理](https://zhuanlan.zhihu.com/p/22527424) : 加水印，滤镜之类的

3. [编码](https://zhuanlan.zhihu.com/p/22544282) : 

   编码分为帧内编码，帧间编码

4. 封装： 就是把视频 音频 字幕等东西装到一个文件中，并添加索引

5. 解码，渲染播放

   ​

   ​

## bit rate码率

[比特率](https://zh.wikipedia.org/wiki/%E6%AF%94%E7%89%B9%E7%8E%87)

bit rate需要从应用场景去理解。

1. 采集阶段

   比特率是指将数字声音、视频由模拟格式转化成数字格式的采样率，采样率越高，还原后的音质、画质就越好。

2. 处理阶段

   比特率表示经过编码（压缩）后的音、视频数据每秒钟需要用多少个比特来表示，而比特就是二进制里面最小的单位，要么是0，要么是1。比特率与音、视频压缩的关系，简单的说就是比特率越高，音、视频的质量就越好，但编码后的文件就越大；如果比特率越少则情况刚好相反

   也就是说，先决定码率，帧率，再决定图片质量。ffmpeg有一个参数很有意思，-pass n 选择处理遍数（1或者2）。两遍编码非常有用。第一遍生成统计信息，第二遍生成精确的请求的码率

   -vn 不做视频记录，输出无视频内容
   -bt tolerance 设置视频码率容忍度kbit/s
   -maxrate bitrate设置最大视频码率容忍度
   -minrate bitreate 设置最小视频码率容忍度

   也说明，码率不是传入是什么参数，结果就是啥。

   如果码率很低，分辨率很高  是会出现马赛克的。而设置多少码率合适，是个经验值。search一下

   ###[关于码率 分辨率 清晰度](http://blog.csdn.net/acs713/article/details/41832419)

   ​

   ​

在数字[多媒体](https://zh.wikipedia.org/wiki/%E5%A4%9A%E5%AA%92%E4%BD%93)领域，*比特率*是单位时间播放连续的媒体如压缩后的[音频](https://zh.wikipedia.org/wiki/%E9%9F%B3%E9%A2%91)或[视频](https://zh.wikipedia.org/wiki/%E8%A7%86%E9%A2%91)的比特数量

一般原始的多媒体文件都比较大，为了便于使用需要对其进行压缩，而码流就对应了压缩时的取样率，单位时间内取样率越大，精度就越高，处理出来的文件就越接近原始文件，但是文件也会越大。

当然，码流越大，文件体积也越大，其计算公式是文件体积=时间X码率/8。例如，网络上常见的一部90分钟1Mbps码流的720P RMVB文件，其体积就=5400秒×1Mb/8=675MB。



码率设置推荐：https://www.zhihu.com/question/49460691